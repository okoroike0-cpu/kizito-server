<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OmniFetch | Video & Music Downloader</title>
    <meta name="description" content="Download videos and music from YouTube, Dailymotion, TikTok, Facebook, Instagram, Vimeo and more.">
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/2583/2583434.png">

    <script>(function(){const s=localStorage.getItem('omni_theme');if(s)document.documentElement.setAttribute('data-theme',s);})();</script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js" onerror="window._socketIOFailed=true"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/abtp2/csplayer@latest/dist/csplayer.min.css">
    <script src="https://cdn.jsdelivr.net/gh/abtp2/csplayer@latest/dist/csplayer.min.js"></script>

    <style>
        :root {
            --bg:      #f0f2f5;
            --card:    #ffffff;
            --text:    #1a1a2e;
            --sub:     #555577;
            --border:  #e0e0ee;
            --input:   #ffffff;
            --accent:  #4f46e5;
            --accentH: #3730a3;
            --green:   #16a34a;
            --greenH:  #15803d;
            --blue:    #2563eb;
            --blueH:   #1d4ed8;
            --red:     #dc2626;
            --muted:   #f3f4f8;
            --glow:    rgba(22,163,74,0.4);
        }
        [data-theme="dark"] {
            --bg:    #0f0f1a;
            --card:  #1a1a2e;
            --text:  #e8e8f0;
            --sub:   #9090b0;
            --border:#2a2a45;
            --input: #252540;
            --muted: #1e1e35;
        }

        *{box-sizing:border-box;margin:0;padding:0;}
        body{background:var(--bg);color:var(--text);font-family:'Segoe UI',system-ui,sans-serif;min-height:100vh;}

        /* â”€â”€ page layout â”€â”€ */
        .page{display:flex;flex-direction:column;align-items:center;padding:36px 14px 80px;}

        /* â”€â”€ header card â”€â”€ */
        .header-card{background:var(--card);border-radius:18px;box-shadow:0 8px 32px rgba(0,0,0,.08);
                     width:100%;max-width:580px;padding:28px 28px 24px;margin-bottom:16px;}

        .logo-row{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:6px;
                  text-decoration:none;}
        .status-dot{width:9px;height:9px;border-radius:50%;background:var(--red);flex-shrink:0;transition:background .4s;}
        h1{color:var(--accent);font-size:30px;font-weight:800;letter-spacing:-.5px;}
        .tagline{text-align:center;font-size:13px;color:var(--sub);margin-bottom:20px;}

        /* â”€â”€ search row â”€â”€ */
        .search-row{display:flex;gap:10px;}
        .search-row input{flex:1;padding:14px 16px;border-radius:10px;border:1.5px solid var(--border);
                          background:var(--input);color:var(--text);font-size:15px;outline:none;
                          transition:border-color .2s;}
        .search-row input:focus{border-color:var(--accent);}
        .search-row input::placeholder{color:var(--sub);}

        #startBtn{cursor:pointer;border:none;padding:13px 22px;border-radius:10px;font-weight:700;
                  font-size:14px;background:var(--accent);color:#fff;display:flex;align-items:center;
                  gap:7px;transition:all .2s;white-space:nowrap;flex-shrink:0;}
        #startBtn:hover:not(:disabled){background:var(--accentH);transform:translateY(-1px);}
        #startBtn:disabled{opacity:.6;cursor:not-allowed;transform:none;}

        .spinner{border:2px solid #fff4;border-top:2px solid #fff;border-radius:50%;
                 width:15px;height:15px;animation:spin 1s linear infinite;display:none;}
        @keyframes spin{to{transform:rotate(360deg);}}

        /* â”€â”€ hint below input â”€â”€ */
        .hint{font-size:11.5px;color:var(--sub);margin-top:10px;text-align:center;line-height:1.5;}
        .hint span{background:var(--muted);padding:2px 7px;border-radius:5px;margin:0 2px;font-weight:600;}

        /* â”€â”€ progress â”€â”€ */
        .prog-wrap{display:none;background:var(--border);height:5px;border-radius:3px;overflow:hidden;margin-top:14px;}
        .prog-bar{width:0%;height:100%;background:var(--green);transition:width .3s;}
        .prog-txt{display:none;font-size:12px;text-align:center;margin-top:6px;color:var(--sub);}

        /* â”€â”€ error â”€â”€ */
        .error-box{display:none;color:var(--red);background:rgba(220,38,38,.07);border:1px solid rgba(220,38,38,.3);
                   padding:10px 14px;border-radius:9px;font-size:13px;margin-top:12px;text-align:center;}

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SEARCH RESULTS  (MP3Juice style)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #searchResults{width:100%;max-width:580px;margin-bottom:16px;display:none;}
        .results-label{font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;
                        color:var(--sub);margin-bottom:10px;}

        .result-item{background:var(--card);border:1px solid var(--border);border-radius:12px;
                     padding:14px 16px;margin-bottom:10px;display:flex;align-items:center;gap:12px;
                     transition:border-color .2s,box-shadow .2s;}
        .result-item:hover{border-color:var(--accent);box-shadow:0 4px 16px rgba(79,70,229,.1);}

        .result-thumb{width:72px;height:48px;border-radius:7px;object-fit:cover;flex-shrink:0;background:var(--muted);}
        .result-thumb-ph{width:72px;height:48px;border-radius:7px;background:var(--muted);flex-shrink:0;
                          display:flex;align-items:center;justify-content:center;font-size:22px;}

        .result-info{flex:1;min-width:0;}
        .result-title{font-size:13px;font-weight:700;overflow:hidden;text-overflow:ellipsis;
                       white-space:nowrap;margin-bottom:5px;line-height:1.3;}
        .result-title-full{font-size:13px;font-weight:700;line-height:1.3;margin-bottom:5px;}
        .result-meta{font-size:11px;color:var(--sub);}

        .result-actions{display:flex;gap:6px;flex-shrink:0;flex-wrap:wrap;justify-content:flex-end;}

        .btn-mp3{padding:6px 11px;border:none;border-radius:7px;font-size:11px;font-weight:700;
                  cursor:pointer;background:var(--green);color:#fff;transition:all .15s;white-space:nowrap;}
        .btn-mp3:hover{background:var(--greenH);transform:translateY(-1px);}

        .btn-mp4{padding:6px 11px;border:none;border-radius:7px;font-size:11px;font-weight:700;
                  cursor:pointer;background:var(--blue);color:#fff;transition:all .15s;white-space:nowrap;}
        .btn-mp4:hover{background:var(--blueH);transform:translateY(-1px);}

        .btn-play{padding:6px 11px;border:1.5px solid var(--border);border-radius:7px;font-size:11px;
                   font-weight:700;cursor:pointer;background:var(--card);color:var(--text);
                   transition:all .15s;white-space:nowrap;}
        .btn-play:hover{border-color:var(--accent);color:var(--accent);}

        /* busy state on action buttons */
        .btn-busy{opacity:.6;cursor:not-allowed !important;transform:none !important;}

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DOWNLOAD RESULT  (URL paste mode)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #downloadCard{background:var(--card);border-radius:18px;box-shadow:0 8px 32px rgba(0,0,0,.08);
                      width:100%;max-width:580px;padding:24px;margin-bottom:16px;display:none;}

        #videoPreview{width:100%;aspect-ratio:16/9;background:#000;border-radius:10px;
                      margin-bottom:14px;overflow:hidden;display:flex;align-items:center;justify-content:center;}
        #videoPreview img{width:100%;height:100%;object-fit:cover;}

        .media-title-row{display:flex;justify-content:space-between;align-items:flex-start;gap:8px;margin-bottom:4px;}
        #dlTitle{font-size:15px;font-weight:700;line-height:1.4;flex:1;}
        #sourceChip{display:none;font-size:10px;background:var(--accent);color:#fff;
                    padding:2px 9px;border-radius:5px;font-weight:700;flex-shrink:0;white-space:nowrap;}
        #dlMeta{font-size:11.5px;color:var(--sub);margin-bottom:12px;line-height:1.5;}

        #formatSelect{width:100%;margin:0 0 10px;padding:11px 12px;border-radius:9px;
                       background:var(--input);color:var(--text);border:1.5px solid var(--border);
                       font-size:13px;outline:none;cursor:pointer;}
        #formatSelect:focus{border-color:var(--accent);}

        #downloadBtn{width:100%;background:var(--green);padding:13px;border:none;color:#fff;
                     font-size:15px;font-weight:700;cursor:pointer;border-radius:10px;
                     transition:transform .2s,background .2s;animation:pulseG 2s infinite;}
        #downloadBtn:hover:not(:disabled){background:var(--greenH);transform:translateY(-1px);}
        #downloadBtn:disabled{background:#6b7280;animation:none;cursor:not-allowed;}

        @keyframes pulseG{0%{box-shadow:0 0 0 0 var(--glow);}70%{box-shadow:0 0 0 13px rgba(22,163,74,0);}100%{box-shadow:0 0 0 0 rgba(22,163,74,0);}}

        /* â”€â”€ mini player popup (for Play buttons in search results) â”€â”€ */
        #miniPlayer{display:none;position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
                    background:var(--card);border:1px solid var(--border);border-radius:14px;
                    box-shadow:0 12px 40px rgba(0,0,0,.2);padding:14px 18px;width:94%;max-width:540px;
                    z-index:500;}
        #miniPlayer .mp-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
        #miniPlayerTitle{font-size:13px;font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1;}
        #miniPlayerClose{background:none;border:none;font-size:18px;cursor:pointer;color:var(--sub);padding:0 4px;}
        #miniPlayerInner{width:100%;aspect-ratio:16/9;background:#000;border-radius:8px;overflow:hidden;}

        /* â”€â”€ platforms â”€â”€ */
        .platforms{display:flex;flex-wrap:wrap;gap:7px;justify-content:center;
                   width:100%;max-width:580px;margin-bottom:20px;}
        .ptag{font-size:11px;font-weight:700;padding:4px 12px;border-radius:20px;
              border:1px solid var(--border);background:var(--card);color:var(--sub);}

        /* â”€â”€ how it works â”€â”€ */
        .guide{width:100%;max-width:580px;margin-bottom:22px;}
        .guide-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
        .step{background:var(--card);border:1px solid var(--border);padding:14px;border-radius:11px;
              font-size:13px;border-left:4px solid var(--accent);line-height:1.45;color:var(--text);}
        .step strong{display:block;margin-bottom:3px;}

        /* â”€â”€ history â”€â”€ */
        #historySection{width:100%;max-width:580px;display:none;margin-top:4px;}
        .hist-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
        .hist-item{background:var(--card);padding:12px 14px;border-radius:11px;margin-bottom:8px;
                   cursor:pointer;border:1px solid var(--border);transition:all .2s;
                   display:flex;justify-content:space-between;align-items:center;}
        .hist-item:hover{border-color:var(--accent);transform:translateY(-2px);box-shadow:0 4px 14px rgba(0,0,0,.08);}
        .hist-thumb{width:56px;height:34px;object-fit:cover;border-radius:5px;flex-shrink:0;}
        .hist-no-thumb{width:56px;height:34px;background:var(--muted);border-radius:5px;
                       display:flex;align-items:center;justify-content:center;font-size:15px;flex-shrink:0;}
        .hist-label{font-weight:700;font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1;margin:0 10px;}
        .refetch-badge{background:var(--muted);color:var(--accent);padding:3px 8px;border-radius:6px;
                       font-size:10px;font-weight:700;border:1px solid var(--border);flex-shrink:0;}

        .clear-btn{background:none;border:1px solid transparent;color:var(--red);font-size:11px;
                   padding:4px 9px;opacity:.65;transition:all .2s;cursor:pointer;border-radius:5px;}
        .clear-btn:hover{opacity:1;background:rgba(220,38,38,.08);border-color:var(--red);}

        /* â”€â”€ share / feedback â”€â”€ */
        .share-btn{background:none;border:1px solid var(--border);color:var(--text);padding:9px;
                   font-size:12px;margin-top:12px;width:100%;opacity:.7;transition:all .2s;
                   border-radius:9px;cursor:pointer;font-weight:700;}
        .share-btn:hover{opacity:1;background:var(--muted);border-color:var(--accent);}
        .feedback-link{display:block;text-align:center;font-size:11px;margin-top:10px;
                        color:var(--sub);opacity:.6;text-decoration:none;transition:.2s;}
        .feedback-link:hover{opacity:1;color:var(--accent);}

        /* â”€â”€ theme toggle â”€â”€ */
        #themeToggle{position:fixed;top:14px;right:14px;z-index:999;padding:7px 13px;
                     font-size:12px;font-weight:700;background:var(--card);color:var(--text);
                     border:1px solid var(--border);cursor:pointer;border-radius:8px;
                     box-shadow:0 2px 8px rgba(0,0,0,.08);}

        @media(max-width:600px){
            .page{padding:14px 10px 70px;}
            .header-card{padding:18px 14px 16px;}
            h1{font-size:24px;}
            .search-row{flex-direction:column;}
            .guide-grid{grid-template-columns:1fr;}
            .result-actions{gap:5px;}
            .result-thumb,.result-thumb-ph{width:58px;height:40px;}
            #miniPlayer{bottom:10px;width:97%;}
        }
    </style>
</head>
<body>

<button id="themeToggle">ğŸŒ™ Mode</button>

<noscript><div style="text-align:center;padding:60px 20px;"><h2>Please enable JavaScript.</h2></div></noscript>

<div class="page">

    <!-- â”€â”€ Header / Search card â”€â”€ -->
    <div class="header-card">
        <a href="/" class="logo-row">
            <div id="statusDot" class="status-dot" title="Connectingâ€¦"></div>
            <h1>OmniFetch</h1>
        </a>
        <p class="tagline">Download videos & music from anywhere</p>

        <div class="search-row">
            <input type="text" id="videoUrl"
                   placeholder="Paste a link  â€”orâ€”  type a song / video nameâ€¦"
                   autocomplete="off" spellcheck="false" />
            <button id="startBtn" onclick="fetchVideo()">
                <span id="btnText">Search</span>
                <div class="spinner" id="spinner"></div>
            </button>
        </div>

        <p class="hint">
            Paste a URL to download directly &nbsp;Â·&nbsp;
            Type a name like <span>Belmont Overstepping</span> to search
        </p>

        <div class="prog-wrap" id="progressWrapper"><div class="prog-bar" id="progressBar"></div></div>
        <p class="prog-txt" id="progressText"></p>
        <div class="error-box" id="errorBox"></div>

        <button class="share-btn" onclick="shareSite()">ğŸ”— Share OmniFetch</button>
        <a class="feedback-link" href="mailto:okoroike0@gmail.com?subject=OmniFetch%20Bug">âœ‰ Report Bug / Feedback</a>
    </div>

    <!-- â”€â”€ Search results (text search mode) â”€â”€ -->
    <div id="searchResults">
        <p class="results-label" id="resultsLabel">Results</p>
        <div id="resultsList"></div>
    </div>

    <!-- â”€â”€ Download card (URL paste mode) â”€â”€ -->
    <div id="downloadCard">
        <div id="videoPreview"></div>
        <div class="media-title-row">
            <strong id="dlTitle">Media Title</strong>
            <span id="sourceChip"></span>
        </div>
        <p id="dlMeta"></p>
        <select id="formatSelect"><option value="0">ğŸ“¹ MP4 â€” Best Quality</option></select>
        <button id="downloadBtn" onclick="triggerDownload()">â¬‡ Download Now</button>
    </div>

    <!-- â”€â”€ Supported platforms â”€â”€ -->
    <div class="platforms">
        <span class="ptag">â–¶ YouTube</span>
        <span class="ptag">ğŸµ TikTok</span>
        <span class="ptag">ğŸ“˜ Facebook</span>
        <span class="ptag">ğŸ“¸ Instagram</span>
        <span class="ptag">ğŸ¦ Twitter/X</span>
        <span class="ptag">ğŸ¬ Dailymotion</span>
        <span class="ptag">ğŸ¥ Vimeo</span>
        <span class="ptag">+ more</span>
    </div>

    <!-- â”€â”€ How it works â”€â”€ -->
    <div class="guide">
        <h3 style="font-size:12px;color:var(--sub);margin-bottom:12px;text-transform:uppercase;letter-spacing:1px;">âš™ How it Works</h3>
        <div class="guide-grid">
            <div class="step"><strong>ğŸ”— Paste a Link</strong>Drop any video URL â€” we find every quality available.</div>
            <div class="step"><strong>ğŸ” Type a Name</strong>Search by song or video title, get MP3 & MP4 instantly.</div>
            <div class="step"><strong>ğŸµ Pick Format</strong>Choose Full HD, HD, SD video â€” or pure MP3 audio.</div>
            <div class="step"><strong>â¬‡ Download</strong>Direct to your device. No ads, no sign-up required.</div>
        </div>
    </div>

    <!-- â”€â”€ Recent history â”€â”€ -->
    <div id="historySection">
        <div class="hist-header">
            <h3 style="font-size:12px;color:var(--sub);text-transform:uppercase;letter-spacing:1px;">ğŸ•˜ Recent Fetches</h3>
            <button class="clear-btn" onclick="clearHistory()">Clear All</button>
        </div>
        <div id="historyList"></div>
    </div>

</div><!-- /page -->

<!-- â”€â”€ Mini player (floating, for Play button) â”€â”€ -->
<div id="miniPlayer">
    <div class="mp-top">
        <span id="miniPlayerTitle">Now Playing</span>
        <button id="miniPlayerClose" onclick="closeMiniPlayer()">âœ•</button>
    </div>
    <div id="miniPlayerInner"></div>
</div>

<script>
    if (window._socketIOFailed || typeof io === 'undefined') {
        window.io = () => ({ on:()=>{}, emit:()=>{}, connected:false, id:'' });
    }
</script>
<script src="kizito2.js"></script>
</body>
</html>